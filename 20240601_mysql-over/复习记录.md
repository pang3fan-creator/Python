# MySQL

```mysql
sudo service mysql status

help;

show create database db2;

create database if not exists mydb3 charset='utf8';

create table if not exists hero(
name varchar(20),
    age int
);
alter table hero add id int first;
alter table hero add gender varchar(1) after name;
alter table hero add attack int;

alter table hero drop attack;

alter table hero modify gender varchar(20);


create database if not exists mydb charset='utf8';
create table if not exists user(
	id int,
    username varchar(20) default '佚名',
    password varchar(20) default '1234567',
    nickname varchar(20) default '小猪'
);

insert into user values(1,'花千骨','1234','小骨');
insert into user values(2,'花千骨','1234','小骨'),
(3,'chuqiaozhuan','3685','chuqiao');

insert into user(id,username) values(4,'zhifouzhifou'),
(5,'woxinyonogheng');


alter table user modify nickname varchar(20) default '赵丽颖';

insert into user (id ,username,password ) values(6,'zhaogege','8555');

update user set password ='8524' where id =6;


update user set password ='111111',nickname='shaqianmo' where username='花千骨';

delete from user where id>=4;
```



```mysql
create database if not exists mydb5 charset=utf8;
create table if not exists hero(
	name varchar(20)
);

alter table hero add money int after name;
alter table hero add id int first;
alter table hero add age int after name;

insert into hero (id ,name,age,money ) values
(1,'libai',50,6888),
(2,'zhaoyun',30,13888),
(3,'liubei',25,6888);

update hero set age=52 where name='liubei';

drop table if exists hero;

drop database if exists mydb5;
```

```mysql
create table if not exists userinfo(
	id int,
    username varchar(20),
    password char(32),
    age tinyint,
    gender char(1),
    birthday date,
    comment text,
    created_time datetime default now()
);

insert into userinfo values(
	3,'lili','123456',37,'F','19871016','beautiful',now()
);

create table if not exists t2(
	id int,
    name varchar(15),
    primary key(id)
);

alter table t2 modify id int  AUTO_INCREMENT;

insert into t2(name) values('亚瑟'),('loser'),('hahahaha'),('gougou');
```

```mysql

create table if not exists mydb02;

create table if not exists table02(
	id int primary key auto_increment,
    name varchar(20) not null
);

insert into table02(name) values('yinghuochong');
insert into table02(name) values('zhaoliying');

insert into table02(id, name) values(8, '迪丽热巴');
insert into table02(id, name) values(null, '迪丽热巴');

insert into table02(name) values(null);

create table if not exists t1(
	id int primary key auto_increment comment '用户编号',
    name varchar(20) unique comment '用户名',
    age tinyint not null default 0 comment '年龄',
    phone char(11) not null default '12345678901' comment '手机号',
    score decimal(4,1) not null default 0.0 comment '成绩',
    created datetime not null default now() comment '注册时间'
);

insert into t1(name) values('只手遮天1');
insert into t1(name) values('只手遮天2');
insert into t1(name) values('只手遮天3');
insert into t1(name) values('只手遮天4');
insert into t1(name) values('只手遮天5');
insert into t1(name) values('只手遮天6');
insert into t1(name) values('只手遮天7');
insert into t1(name) values('只手遮天8');
insert into t1(name) values('只手遮天9');

update t1 set age=age+3 where id >=2;

create table if not exists t3(
	id int primary key auto_increment,
    username varchar(20) not null unique,
    password char(80) unique,
    email varchar(255) ,
    phone char(11) not null,
    birth date ,
    balance decimal(7,2) not null default 0.00,
    created_time datetime not null
);

insert into t3 values
    (1,'lala','123455','lala@tedu.cn','12345678901','1990-01-01',8.88,'1997-07-01 00:00:00'),
    (2,'lili','123456','lala@tedu.cn','12345678901','1990-01-01',8.88,'1999-12-20 00:00:00');

update t3 set phone='98765432100',balance=balance+100 where id=2;
delete from t3 where balance>=99;

--记住这个进度,有时间继续
```

```mysql
day02

select * from teacher limit 10;

select id,name,age from teacher;

select name,age from teacher where age%2=0

select name,salary*12 from teacher where salary*12 >=60000;

select name,age,gender,class_id,job from student where class_id <6 and job='中队长';

select name,floor from class where floor between 3 and 5;

select name,title,salary from teacher where title not in ('一级讲师','二级讲师');

select name,job,gender,age from student where job not in ('大队长','中队长','小队长');

select name,gender ,subject_id from teacher where subject_id=1 and gender='男';

select name,gender,salary from teacher where salary>=5000 and gender='女';

select name as a,salary as b ,gender as c from teacher as d where (salary>=5000 and gender ='男') or gender='女' order by b asc;

select * from teacher where salary not between 4000 and 8000;

select * from student where(age between 7 and 10)and gender ='男' limit 20;

select * from teacher where title in('一级讲师','二级讲师');

select name from student where name like '%郭';

select * from student where(age between 9 and 12 ) and name like '%庞%';

select name,job from student    where name like '邱%' and job like '%课代表%';

select name,salary from teacher order by salary desc;

select * from student order by birth asc limit 60;

select name,salary,comm from teacher order by comm asc, salary desc;

select name,age from student where age=8 and name like '%苗%' limit 1,100;

select name,subject_id,salary from teacher where subject_id !=1 order by salary desc limit 10,30;

select name,subject_id,salary from teacher where subject_id !=1 order by salary desc limit 100;

select name, comm from teacher order by comm desc limit 5,5;
```

```mysql
--聚合函数
avg() max() sum() count()

select * from teacher;

select avg(salary) from teacher;

select count(name) from teacher;

select count(name)  as total from teacher;

select count(*) from student where class_id=1;

select count(*) total from student where job like "%课代表%";

select salary from teacher where salary>=5000 order by salary asc;

select avg(salary) from teacher where title like '%总监%';

select title, avg(salary) as s from teacher group by title;

select class_id,count(*) from student group by class_id;

select job,count(*) t,max(birth),min(birth) from student where gender='男' group by job order by t desc limit 0,3;

select class_id,gender,count(*) from student group by class_id,gender limit 0,4;

select class_id,job,count(*) from student group by class_id,job

select subject_id,avg(salary)  from teacher  group by subject_id;

--两种写法
select * from (select subject_id,avg(salary) as s  from teacher  group by subject_id) as a where s>=6000;

select subject_id,avg(salary) s from teacher group by subject_id having s>=6000;

select subject_id,avg(salary) as s from teacher where gender='女' group by subject_id having s>=3000 order by s asc limit 0,2;

select distinct title from teacher;

select title ,count(title) as t from teacher group by title;

select title  from teacher group by title;

select age,job from student group by age,job ;

select distinct age,job from student;

select name,salary from teacher where salary>=(select salary from teacher where name='范传奇') order by salary asc;

select name,salary from teacher where salary>=(select avg(salary) from teacher);

select name,class_id from student where class_id in (select class_id from student where name in ('祝雷','李费水'));

create table o(
    oid int primary key auto_increment,
    state varchar(20),
    uid int,
    constraint ou_fk foreign key(uid) references u(uid)
);

select t.name,s.name from teacher t,subject s where s.id=t.subject_id;

select * from teacher t,subject s where s.id=t.subject_id;

select * from subject s ,teacher t;

select * from class c,teacher t where c.teacher_id=t.id and t.name='王克晶';

select * from class c,teacher t where c.teacher_id=t.id and c.name like '%3年级%';

select * from location l,student s where l.id=s.location_id and l.name='南京';

select * from class c ,student s where c.id=s.class_id and s.job like '%中队长%' and c.name like '%5年级%';


select s.name,s.age,c.name,t.name from student s,class c ,teacher t where s.class_id=c.id and c.teacher_id=t.id and t.name='范传奇';

select * from subject s,class c ,teacher t where s.id=t.subject_id and t.id =c.teacher_id and c.name like '%3年级%';

select count(*) from student s,class c ,teacher t where s.class_id=c.id and c.teacher_id=t.id and t.name='范传奇';

select s.name,avg(t.salary) from teacher t,subject s where t.subject_id=s.id group by s.name;

select s.name,avg(t.salary) as s from teacher t,subject s where t.subject_id=s.id and t.gender='男' group by s.name having s>=4000 order by s desc limit 0,3;

select * from student s ,subject su ,t_stu_subject_score t where s.id=t.stu_id and t.subject_id=su.id and su.name='语文';

select * from class c,student s where c.id=s.class_id and c.name like '%1年级1班%';
select s.name,s.age,c.name from class c
      join student s on c.id=s.class_id
  where c.name='1年级1班';

select * from class c ,student s ,t_stu_subject_score t,subject su where 
c.id=s.class_id and s.id=t.stu_id and t.subject_id=su.id and c.name like '%1年级1班%' and su.name='语文';

create table t2 select * from student limit 15;

```

